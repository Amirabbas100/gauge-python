language: python

sudo: required

python:
  - "2.7"
  - "3.2"
  - "3.3"
  - "3.4"
  - "3.5"

# command to install dependencies
install: "pip install -r requirements.txt"

# command to run tests
script:
  - python install.py
  - sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF
  - sudo apt-key adv --keyserver hkp://pool.sks-keyservers.net --recv-keys 023EDB0B
  - sudo apt-get -y update > /dev/null
  - sudo apt-get install -y apt-transport-https
  - echo "deb http://download.mono-project.com/repo/debian wheezy main" | sudo tee /etc/apt/sources.list.d/mono-xamarin.list
  - echo "deb https://dl.bintray.com/gauge/gauge-deb nightly main" | sudo tee -a /etc/apt/sources.list
  - sudo apt-get -y update > /dev/null
  - sudo apt-get install -y mono-complete fsharp gauge > /dev/null
  - gauge_setup
  - gauge -v
  - python install.py --install
  - export GAUGE_PYTHON_VERSION=$(cd bin; ls gauge-python-*.zip | sed "s/^gauge-python-\([^;]*\).zip/\1/")
  - gauge --uninstall python
  - gauge --install python -f "bin/gauge-python-$GAUGE_PYTHON_VERSION.zip"
  - pip uninstall -y getgauge | echo
  - pip install "dist/getgauge-$GAUGE_PYTHON_VERSION.tar.gz"
  - gauge --install html-report
  - gauge --install xml-report
  - gauge --install java
  - git clone git://github.com/getgauge/gauge-tests --depth 1 --recursive
  - cd gauge-tests
  - sh starttests.sh python
  - cd ../